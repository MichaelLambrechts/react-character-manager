{"ast":null,"code":"import _defineProperty from \"/home/michael/Documents/react-manager-project/react-character-manager/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/michael/Documents/react-manager-project/react-character-manager/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/michael/Documents/react-manager-project/react-character-manager/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/michael/Documents/react-manager-project/react-character-manager/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/michael/Documents/react-manager-project/react-character-manager/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/michael/Documents/react-manager-project/react-character-manager/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/michael/Documents/react-manager-project/react-character-manager/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/michael/Documents/react-manager-project/react-character-manager/src/Edit.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport NavBarContent from './NavBarContent';\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"shards-ui/dist/css/shards.min.css\";\nimport { HashRouter as Router, Route, Link } from \"react-router-dom\";\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\n\nvar Edit =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Edit, _Component);\n\n  function Edit(props) {\n    var _this;\n\n    _classCallCheck(this, Edit);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Edit).call(this, props));\n    _this.onChangeCharacterName = _this.onChangeCharacterName.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeShortDescr = _this.onChangeShortDescr.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeLongDescr = _this.onChangeLongDescr.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeImg = _this.onChangeImg.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.input = React.createRef();\n    _this.state = {\n      error: null,\n      isLoaded: false,\n      name: '',\n      shortDescription: '',\n      description: '',\n      image: '',\n      file: '',\n      imagePreviewUrl: ''\n    };\n    return _this;\n  }\n  /*api mount*/\n\n\n  _createClass(Edit, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios.get(\"https://character-database.becode.xyz/characters/\" + this.props.match.params.id).then(function (response) {\n        //console.log(JSON.stringify(response.data));\n        _this2.setState({\n          name: response.data.name,\n          shortDescription: response.data.shortDescription,\n          description: response.data.description,\n          //image : response.data.image.substr(this.image.indexOf(',') + 1)\n          image: response.data.image\n        }); //console.log(response.data.image);\n\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n    /*fct to setStage on change*/\n\n  }, {\n    key: \"onChangeCharacterName\",\n    value: function onChangeCharacterName(e) {\n      this.setState({\n        name: e.target.value\n      });\n    }\n  }, {\n    key: \"onChangeShortDescr\",\n    value: function onChangeShortDescr(e) {\n      this.setState({\n        shortDescription: e.target.value\n      });\n    }\n  }, {\n    key: \"onChangeLongDescr\",\n    value: function onChangeLongDescr(e) {\n      this.setState({\n        description: e.target.value\n      });\n    }\n  }, {\n    key: \"onChangeImg\",\n    value: function onChangeImg(e) {\n      var _this3 = this;\n\n      e.preventDefault();\n      var reader = new FileReader();\n      var file = e.target.files[0];\n      var output = document.getElementById('output-img'); //console.log(output);\n      //base64 convert\n\n      reader.onloadend = function () {\n        _this3.setState({\n          file: file,\n          imagePreviewUrl: reader.result\n        }); //file preview\n\n\n        output.src = reader.result;\n      };\n\n      reader.readAsDataURL(file);\n    }\n    /*fct submit + update the api */\n\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit(e) {\n      e.preventDefault();\n      /*check if image has been selected otherwise take the previous one*/\n\n      if (!this.state.imagePreviewUrl) {\n        this.state.imagePreviewUrl = this.state.image;\n      } else {\n        this.state.imagePreviewUrl = this.state.imagePreviewUrl;\n      }\n      /*check if no empty fieds*/\n\n\n      if (this.state.name && this.state.shortDescription && this.state.description && this.state.imagePreviewUrl) {\n        var obj = {\n          name: this.state.name,\n          shortDescription: this.state.shortDescription,\n          description: this.state.description,\n          image: this.state.imagePreviewUrl.substr(this.state.imagePreviewUrl.indexOf(',') + 1)\n        };\n        axios.put('https://character-database.becode.xyz/characters/' + this.props.match.params.id, obj).then(this.props.history.push(\"/\"));\n      } else {\n        alert(\"No empty field allowed\");\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this,\n          _React$createElement;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(NavBarContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }), React.createElement(Button, {\n        className: \"mt-5 w-100 btn btn-danger\",\n        to: \"/\",\n        onClick: function onClick(e) {\n          if (window.confirm('Do you want leave the character adding?')) _this4.props.history.push(\"/\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"Cancel\"), React.createElement(\"div\", {\n        className: \"col-xs-12 col-md-6 col-xl-4 p-5 mx-auto mt-4 text-center d-flex flex-column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"mb-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"img-thumbnail rounded-circle mx-auto mb-2 shadow-sm\",\n        src: 'data:image/jpeg;base64,' + this.state.image,\n        alt: this.state.name,\n        style: {\n          width: \"100px\",\n          height: \"100px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }), React.createElement(\"h4\", {\n        className: \"border-bottom pb-3 mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, this.state.name), React.createElement(\"span\", {\n        className: \"text-muted-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, this.state.shortDescription), React.createElement(\"div\", {\n        className: \"border-top mt-2 pt-2 container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, this.state.description))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(Form, {\n        className: \"m-5\",\n        onSubmit: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, \"Name\"), React.createElement(Form.Control, {\n        type: \"text\",\n        onChange: this.onChangeCharacterName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Short Description\"), React.createElement(Form.Control, (_React$createElement = {\n        type: \"text\",\n        onChange: this.onChangeShortDescr\n      }, _defineProperty(_React$createElement, \"type\", \"text\"), _defineProperty(_React$createElement, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      }), _defineProperty(_React$createElement, \"__self\", this), _React$createElement))), React.createElement(Form.Group, {\n        controlId: \"exampleForm.ControlTextarea1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, \"Description\"), React.createElement(Form.Control, {\n        as: \"textarea\",\n        rows: \"3\",\n        onChange: this.onChangeLongDescr,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, \"Image\"), React.createElement(\"div\", {\n        className: \"grid-container-img-add\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"grid-container-img-add\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"file\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"form-control-file\",\n        type: \"file\",\n        name: \"image\",\n        id: \"UploadedFile\",\n        onChange: function onChange(e) {\n          return _this4.onChangeImg(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"preview\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        id: \"output-img\",\n        className: \"output\",\n        alt: \"\",\n        src: \"data:image/jpeg;base64,\".concat(this.state.image),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }))))), React.createElement(Button, {\n        variant: \"primary\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, \"Submit\")), \";\"));\n    }\n  }]);\n\n  return Edit;\n}(Component);\n\nexport { Edit as default };","map":{"version":3,"sources":["/home/michael/Documents/react-manager-project/react-character-manager/src/Edit.js"],"names":["React","Component","axios","NavBarContent","HashRouter","Router","Route","Link","Form","Button","Edit","props","onChangeCharacterName","bind","onChangeShortDescr","onChangeLongDescr","onChangeImg","onSubmit","input","createRef","state","error","isLoaded","name","shortDescription","description","image","file","imagePreviewUrl","get","match","params","id","then","response","setState","data","catch","console","log","e","target","value","preventDefault","reader","FileReader","files","output","document","getElementById","onloadend","result","src","readAsDataURL","obj","substr","indexOf","put","history","push","alert","window","confirm","width","height"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport NavBarContent from './NavBarContent';\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"shards-ui/dist/css/shards.min.css\";\nimport { HashRouter as Router, Route, Link } from \"react-router-dom\";\nimport Form from 'react-bootstrap/Form'\nimport Button from 'react-bootstrap/Button'\n\n\nexport default class Edit extends Component {\n\n    constructor(props) {\n        super(props);\n        this.onChangeCharacterName = this.onChangeCharacterName.bind(this);\n        this.onChangeShortDescr = this.onChangeShortDescr.bind(this);\n        this.onChangeLongDescr = this.onChangeLongDescr.bind(this);\n        this.onChangeImg = this.onChangeImg.bind(this);\n        this.onSubmit = this.onSubmit.bind(this);\n        this.input = React.createRef();\n\n        this.state = {\n            error: null,\n            isLoaded: false,\n            name: '',\n            shortDescription: '',\n            description: '',\n            image: '',\n            file: '',\n            imagePreviewUrl: ''\n        }\n    }\n\n    /*api mount*/\n    componentDidMount() {\n        axios.get(\"https://character-database.becode.xyz/characters/\" + this.props.match.params.id)\n            .then(\n                (response) => {\n                    //console.log(JSON.stringify(response.data));\n                    this.setState({\n                        name: response.data.name,\n                        shortDescription: response.data.shortDescription,\n                        description: response.data.description,\n                        //image : response.data.image.substr(this.image.indexOf(',') + 1)\n                        image: response.data.image,\n                    });\n                    //console.log(response.data.image);\n                })\n            .catch(function (error) {\n                console.log(error);\n            })\n    }\n\n    /*fct to setStage on change*/\n    onChangeCharacterName(e) {\n        this.setState({\n            name: e.target.value\n        });\n    }\n\n    onChangeShortDescr(e) {\n        this.setState({\n            shortDescription: e.target.value\n        })\n    }\n    onChangeLongDescr(e) {\n        this.setState({\n            description: e.target.value\n        })\n    }\n\n    onChangeImg(e) {\n        e.preventDefault();\n\n        let reader = new FileReader();\n        let file = e.target.files[0];\n        let output = document.getElementById('output-img');\n        //console.log(output);\n        //base64 convert\n        reader.onloadend = () => {\n            this.setState({\n                file: file,\n                imagePreviewUrl: reader.result\n            });\n            //file preview\n            output.src = reader.result\n        }\n        reader.readAsDataURL(file)\n    }\n\n    /*fct submit + update the api */\n    onSubmit(e) {\n        e.preventDefault();\n        /*check if image has been selected otherwise take the previous one*/\n        if (!this.state.imagePreviewUrl) {\n            this.state.imagePreviewUrl = this.state.image;\n        }\n        else {\n            this.state.imagePreviewUrl = this.state.imagePreviewUrl;\n        }\n        /*check if no empty fieds*/\n        if (this.state.name && this.state.shortDescription && this.state.description && this.state.imagePreviewUrl) {\n            const obj = {\n                name: this.state.name,\n                shortDescription: this.state.shortDescription,\n                description: this.state.description,\n                image: this.state.imagePreviewUrl.substr(this.state.imagePreviewUrl.indexOf(',') + 1)\n            };\n            axios.put('https://character-database.becode.xyz/characters/' + this.props.match.params.id, obj)\n                .then(\n                    this.props.history.push(\"/\")\n                );\n        }\n        else {\n            alert(\"No empty field allowed\");\n        }\n    }\n\n    render() {\n\n\n        return (\n            <div>\n                <NavBarContent />\n                <Button className=\"mt-5 w-100 btn btn-danger\" to=\"/\" onClick={(e) => { if (window.confirm('Do you want leave the character adding?')) this.props.history.push(\"/\"); }}>Cancel</Button>\n                <div className=\"col-xs-12 col-md-6 col-xl-4 p-5 mx-auto mt-4 text-center d-flex flex-column\">\n\n                    <div className=\"mb-auto\">\n                        <img\n                            className=\"img-thumbnail rounded-circle mx-auto mb-2 shadow-sm\"\n                            src={'data:image/jpeg;base64,' + this.state.image}\n                            alt={this.state.name}\n                            style={{ width: \"100px\", height: \"100px\" }}\n                        />\n                        <h4 className=\"border-bottom pb-3 mb-3\">{this.state.name}</h4>\n                        <span className=\"text-muted-5\">{this.state.shortDescription}</span>\n                        <div className=\"border-top mt-2 pt-2 container\">\n                            {this.state.description}\n                        </div>\n                    </div>\n\n                </div>\n\n                <div>\n                    \n                    <Form className=\"m-5\" onSubmit={this.onSubmit}>\n                        <Form.Group>\n                            <Form.Label>Name</Form.Label>\n                            <Form.Control type=\"text\" onChange={this.onChangeCharacterName} />\n                        </Form.Group>\n                        <Form.Group>\n                            <Form.Label>Short Description</Form.Label>\n                            <Form.Control type=\"text\" onChange={this.onChangeShortDescr} type=\"text\" />\n                        </Form.Group>\n                        <Form.Group controlId=\"exampleForm.ControlTextarea1\">\n                            <Form.Label>Description</Form.Label>\n                            <Form.Control as=\"textarea\" rows=\"3\" onChange={this.onChangeLongDescr} />\n                        </Form.Group>\n                        <Form.Group>\n                            <Form.Label>Image</Form.Label>\n                            <div className=\"grid-container-img-add\">\n                                <div className=\"grid-container-img-add\">\n                                    <div className=\"file\"><input className=\"form-control-file\" type=\"file\" name=\"image\" id=\"UploadedFile\" onChange={(e) => this.onChangeImg(e)} /></div>\n                                    <div className=\"preview\"><img id=\"output-img\" className=\"output\" alt=\"\" src={`data:image/jpeg;base64,${this.state.image}`} /></div>\n                                </div>\n                            </div>\n                        </Form.Group>\n                        <Button variant=\"primary\" type=\"submit\">\n                            Submit\n                    </Button>\n                    </Form>;\n                </div>\n            </div>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}